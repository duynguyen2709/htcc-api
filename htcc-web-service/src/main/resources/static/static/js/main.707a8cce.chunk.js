(this["webpackJsonphtcc-web-service"]=this["webpackJsonphtcc-web-service"]||[]).push([[0],{134:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(71),r=a.n(o),i=(a(59),a(137)),c=a(72),l=a.n(c),d=a(39),m=a.n(d),h=a(73);var p=()=>s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{id:"notfound"},s.a.createElement("div",{className:"notfound"},s.a.createElement("div",{className:"notfound-404"},s.a.createElement("h1",null,"500")),s.a.createElement("h2",null,"H\u1ec7 th\u1ed1ng c\xf3 l\u1ed7i. Vui l\xf2ng th\u1eed l\u1ea1i sau."),s.a.createElement("p",null,"\u0110\xe3 x\u1ea3y ra l\u1ed7i khi t\u1ea3i d\u1eef li\u1ec7u. Vui l\xf2ng t\u1ea3i l\u1ea1i trang"),s.a.createElement("p",null,"ho\u1eb7c li\xean h\u1ec7 qu\u1ea3n tr\u1ecb vi\xean \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3."),s.a.createElement("a",{href:"javascript:window.location.reload(true)"},"T\u1ea3i l\u1ea1i trang")))),u=a(74),w=a.n(u);const f="".concat("/api","/genqrcode");class g extends s.a.Component{constructor(e){super(e),this.setCompanyIdAndOfficeId=e=>{const t=m.a.parse(e),a=t.companyId,n=t.officeId;this.setState({companyId:a,officeId:n},()=>{this.setNewImage()})},this.setNewImage=()=>{if(this.state.error)return;this.setState({isLoading:!0});const e=this.state,t=e.companyId,a=e.officeId,n=(new Date).getTime(),s="".concat(f,"?companyId=").concat(t,"&officeId=").concat(a,"&reqDate=").concat(n);console.log("Load new QR Code at : ".concat(n,"\nURL = ").concat(s)),this.setState({url:s,nextCountdown:n+3e5})},this.state={url:"",isLoading:!0,companyId:"",officeId:"",nextCountdown:new Date,error:!1},this.setNewImage=this.setNewImage.bind(this),this.setCompanyIdAndOfficeId=this.setCompanyIdAndOfficeId.bind(this)}componentWillReceiveProps(e,t){this.props.location.search!==e.location.search&&this.setCompanyIdAndOfficeId(e.location.search)}componentDidMount(){this.setCompanyIdAndOfficeId(this.props.location.search),this.task=l.a.schedule("*/5 * * * *",()=>{this.setNewImage()},null)}render(){const e=this.state,t=e.url,a=e.nextCountdown,n=e.error,o=e.isLoading;return n?s.a.createElement(p,null):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",null,s.a.createElement("img",{src:w.a,style:{display:o?"block":"none"},className:"center-div",alt:"loading"}),s.a.createElement("img",{alt:"qrcode",style:{display:o?"none":"block"},className:"center-div",src:t,onLoad:e=>{this.setState({isLoading:!1})},onError:e=>{this.task.destroy(),this.setState({error:!0})}})),s.a.createElement("div",{className:"countdown",style:{display:o?"none":"block"}},s.a.createElement(h.a,{date:a})))}}var v=Object(i.a)(g);const E=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function y(e,t){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const a=e.installing;a.onstatechange=()=>{"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))}}}).catch(e=>{console.error("Error during service worker registration:",e)})}var I=a(136),b=a(135),k=a(26),N=a(38),P=a(81),C=a.n(P);const x="".concat("/api","/resetpassword");class S extends s.a.Component{constructor(e){super(e),this.resetPassword=e=>{const t=e.password,a=this.state,n=a.clientId,s=a.username,o=a.token;let r=this.state.companyId;r||(r="");const i={clientId:n,companyId:r,username:s,password:t,token:o};C.a.post(x,i,{}).then(e=>{1===e.data.returnCode?(alert(e.data.returnMessage),setTimeout(()=>{window.open("","_self"),window.close()},3e3)):alert(e.data.returnMessage)}).catch(e=>{alert("H\u1ec7 th\u1ed1ng c\xf3 l\u1ed7i. Vui l\xf2ng th\u1eed l\u1ea1i sau"),console.error(e)})},this.setParams=e=>{this.setState({error:!1});const t=m.a.parse(e),a=t.companyId,n=t.username,s=t.token;let o=parseInt(t.clientId);!(o<1||o>3)&&n&&""!==n&&s&&""!==s&&(2!==o&&1!==o||a&&""!==a)?this.setState({companyId:a,username:n,clientId:o,token:s}):this.setState({error:!0})},this.state={companyId:"",clientId:0,username:"",token:"",error:!1},this.setParams=this.setParams.bind(this),this.resetPassword=this.resetPassword.bind(this)}componentWillReceiveProps(e,t){this.props.location.search!==e.location.search&&this.setParams(e.location.search)}componentDidMount(){this.setParams(this.props.location.search)}render(){return this.state.error?s.a.createElement(p,null):s.a.createElement("div",{className:"jumbotron"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-6 offset-md-3"},s.a.createElement("h3",{style:{textAlign:"center",marginBottom:"20px"}},"Thi\u1ebft l\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u"),s.a.createElement(k.d,{initialValues:{password:"",confirmPassword:""},validationSchema:N.a().shape({password:N.c().min(6,"M\u1eadt kh\u1ea9u ph\u1ea3i d\xe0i \xedt nh\u1ea5t 6 k\xed t\u1ef1").required("M\u1eadt kh\u1ea9u kh\xf4ng \u0111\u01b0\u1ee3c r\u1ed7ng"),confirmPassword:N.c().oneOf([N.b("password"),null],"M\u1eadt kh\u1ea9u kh\xf4ng kh\u1edbp").required("Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u kh\xf4ng \u0111\u01b0\u1ee3c r\u1ed7ng")}),onSubmit:e=>{this.resetPassword(e)},render:({errors:e,status:t,touched:a})=>s.a.createElement(k.c,null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"password"},"M\u1eadt kh\u1ea9u m\u1edbi"),s.a.createElement(k.b,{name:"password",type:"password",className:"form-control"+(e.password&&a.password?" is-invalid":"")}),s.a.createElement(k.a,{name:"password",component:"div",className:"invalid-feedback"})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"confirmPassword"},"Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u"),s.a.createElement(k.b,{name:"confirmPassword",type:"password",className:"form-control"+(e.confirmPassword&&a.confirmPassword?" is-invalid":"")}),s.a.createElement(k.a,{name:"confirmPassword",component:"div",className:"invalid-feedback"})),s.a.createElement("div",{className:"form-group"},s.a.createElement("button",{type:"submit",className:"btn btn-primary mr-2"},"X\xe1c nh\u1eadn"),s.a.createElement("button",{type:"reset",className:"btn btn-secondary"},"X\xf3a")))})))))}}r.a.render(s.a.createElement(I.a,null,s.a.createElement("div",null,s.a.createElement(b.a,{exact:!0,path:"/genqrcode",component:v}),s.a.createElement(b.a,{exact:!0,path:"/resetpassword",component:S}))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",()=>{const t="".concat("","/service-worker.js");E?(!function(e,t){fetch(e).then(a=>{404===a.status||-1===a.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):y(e,t)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):y(t,e)})}}()},59:function(e,t,a){},74:function(e,t,a){e.exports=a.p+"static/media/loading.1a197dfc.gif"},84:function(e,t,a){e.exports=a(134)}},[[84,1,2]]]);
//# sourceMappingURL=main.707a8cce.chunk.js.map